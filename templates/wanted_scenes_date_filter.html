<!-- Date Range Filter for Wanted Scenes -->
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card border-primary">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-calendar-alt"></i> Filter by Release Date</h5>
            </div>
            <div class="card-body">
                <form method="GET" id="dateFilterForm" class="row g-3">
                    <div class="col-md-3">
                        <label for="from_date" class="form-label">From Date:</label>
                        <input type="date" class="form-control" id="from_date" name="from_date" 
                               value="{{ request.args.get('from_date', '') }}">
                    </div>
                    <div class="col-md-3">
                        <label for="to_date" class="form-label">To Date:</label>
                        <input type="date" class="form-control" id="to_date" name="to_date" 
                               value="{{ request.args.get('to_date', '') }}">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">&nbsp;</label>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-filter"></i> Apply Filter
                            </button>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">&nbsp;</label>
                        <div class="d-grid">
                            <button type="button" class="btn btn-secondary" onclick="setLastYear()">
                                <i class="fas fa-calendar-minus"></i> Last 1 Year
                            </button>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">&nbsp;</label>
                        <div class="d-grid">
                            <button type="button" class="btn btn-outline-secondary" onclick="clearDates()">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function setLastYear() {
    const today = new Date();
    const oneYearAgo = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());
    
    document.getElementById('from_date').value = oneYearAgo.toISOString().split('T')[0];
    document.getElementById('to_date').value = today.toISOString().split('T')[0];
}

function clearDates() {
    document.getElementById('from_date').value = '';
    document.getElementById('to_date').value = '';
    document.getElementById('dateFilterForm').submit();
}

// Auto-set last year if no dates provided
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const fromDate = document.getElementById('from_date').value;
    const toDate = document.getElementById('to_date').value;
    
    if (!fromDate && !toDate && !urlParams.has('from_date') && !urlParams.has('to_date')) {
        setLastYear();
    }
});
</script>
